CREATE DATABASE TwitterProject;
USE TwitterProject;

CREATE SCHEMA Twitter_P; 

CREATE TABLE Twitter_P.user_roles (
  user_role_id int not null AUTO_INCREMENT, 
  role_name  varchar(50) not null,
  primary key (user_role_id),
  UNIQUE (role_name)
);

INSERT INTO Twitter_P.user_roles(role_name) VALUES('Admin'), ('Normal User');
select * from Twitter_P.user_roles;
CREATE TABLE Twitter_P.user_profiles (
  user_profile_id int not null AUTO_INCREMENT, 
  first_name  varchar(50),
  middle_name  varchar(50),
  last_name  varchar(50),
  email varchar(100) not null, 
  password varchar(100) not null,
  gender ENUM('M', 'F'),
  birth_date DateTime,
  phone_number varchar(10),
  created_date datetime,
  updated_date datetime,
  following_count  int DEFAULT 0,
  followers_count int DEFAULT 0,
  tweets_count int DEFAULT 0,
  is_active BOOLEAN DEFAULT TRUE,
  is_reported BOOLEAN DEFAULT FALSE,
  is_blocked BOOLEAN DEFAULT FALSE,
  user_role_id int,
  primary key (user_profile_id),
  UNIQUE key (email),
  FOREIGN KEY (user_role_id) REFERENCES user_roles(user_role_id)
);


INSERT INTO Twitter_P.user_profiles(first_name, middle_name, last_name, email, password, gender, birth_date, phone_number, created_date, updated_date, user_role_id )
  VALUES ('sumanth', 'lemin', 'patel','sumanth@gmail.com', 'sumanth@123', 'M','1998-01-26' ,9017563641, CURDATE(), CURDATE(), 1) , 
  ('nischala', 'samula', 'pheri','nischala@gmail.com', 'nischala@123', 'M','1996-08-09' ,9019855658, CURDATE(), CURDATE(), 2) ,
  ('kumar', 'ker', 'kar','kumar@gmail.com', 'kumar@123', 'M','1995-07-04' ,9013695328, CURDATE(), CURDATE(), 2) ,
  ('reddy', 'pam', 'gu','reddy@gmail.com', 'reddy@123', 'M','1996-03-25' ,9015667545, CURDATE(), CURDATE(), 2) ,
  ('mani', 'koch', 'mil','mani@gmail.com', 'mani@123', 'F','1998-09-15' ,9010637953, CURDATE(), CURDATE(), 2) ,
  ('naga', 'muni', 'mal','naga@gmail.com', 'naga@123', 'M','1997-08-11' ,9010986646, CURDATE(), CURDATE(), 2) ,
  ('harika', 'ween', 'ko','harika@gmail.com', 'harika@123', 'M','1996-06-06' ,9019775367, CURDATE(), CURDATE(), 2) ,
  ('harshitha', 'r', 'ken','harshitha@gmail.com', 'harshitha@123', 'M','1994-06-21' ,9019638537, CURDATE(), CURDATE(), 2) ,
  ('meghana', 'pal', 'ber', 'meghana@gmail.com', 'meghana@123', 'M','1993-06-20' ,9015446677, CURDATE(), CURDATE(), 2) ,
  ('aneesah', 'wen', 'mok','aneesah@gmail.com', 'aneesah@123', 'F','1999-02-21' ,9018884546, CURDATE(), CURDATE(), 2) ,
  ('arzu', 'ka', 'lee','arzu@gmail.com', 'arzu@123', 'M','1995-01-06' ,9019955774, CURDATE(), CURDATE(), 2) ,
  ('vidya', 'oni', 'pho','vidya@gmail.com', 'vidya@123', 'M','1994-07-07' ,9017566467, CURDATE(), CURDATE(), 2) ,
  ('raghavendra', 'si', 'gal','raghavendra@gmail.com', 'raghavendra@123', 'M','1997-08-09' ,9018439538, CURDATE(), CURDATE(), 2) ,
  ('pooja', 'than', 'yang','pooja@gmail.com', 'pooja@123', 'M', '1997-07-17', 9010363584, CURDATE(), CURDATE(), 2) ,
  ('amulya', 'keer', 'bil','amulya@gmail.com', 'amulya@123', 'M', '1996-02-12', 9019526106, CURDATE(), CURDATE(), 2) ,
  ('teja', 'sher', 'ka', 'teja@gmail.com', 'teja@123', 'M', '1996-06-09' ,9018665557, CURDATE(), CURDATE(), 2) ,
  ('pratyusha', 'p', 'yan','pratyusha@gmail.com', 'pratyusha@123', 'M','1998-01-01' ,9010989565, CURDATE(), CURDATE(), 2) ,
  ('divya', 'va', 'mik','divya@gmail.com', 'divya@123', 'M','1999-05-26' ,9019677459, CURDATE(), CURDATE(), 2) ,
  ('yasaswini', 'yo', 'yang','yasaswini@gmail.com', 'yasaswini@123','M','1998-03-10' ,9019254671, CURDATE(), CURDATE(), 2) ,
  ('alekhya', 'ser', 'sher','alekhya@gmail.com', 'alekhya@123', 'M','1997-10-13' ,9014397490, CURDATE(), CURDATE(), 2) ,
  ('srividya', 'pal', 'min','srividya@gmail.com', 'srividya@123', 'M','1996-11-20' ,9018987675, CURDATE(), CURDATE(), 2) ,
  ('akhil', 'eron', 'gil', 'akhil@gmail.com','akhil@123','M','1998-12-12' ,9012846048, CURDATE(), CURDATE(), 2) ,
  ('murali', 'kumar', 'chin', 'murali@gmail.com', 'murali@123', 'F','1998-01-05' ,9012068396, CURDATE(), CURDATE(), 2) ,
  ('manikumar', 'ka', 'mi','manikumar@gmail.com', 'manikumar@123', 'M','1996-08-01' ,9019462846, CURDATE(), CURDATE(), 2) ,
  ('ramya', 'jaa', 'un','ramya@gmail.com', 'ramya@123', 'M','1997-11-01' ,9010573569, CURDATE(), CURDATE(), 2) ,
  ('sai', 'shekar', 'mar','sai@gmail.com', 'sai@123', 'M','1994-12-18' ,9019463026, CURDATE(), CURDATE(), 2) ,
  ('venkat', 'kerav', 'vani','venkat@gmail.com', 'venkat@123', 'M','1998-02-19' ,9018385925, CURDATE(), CURDATE(), 2) ,
  ('surendra', 'sai', 'reddy','surendra@gmail.com', 'surendra@123', 'F','1997-05-08' ,9019463726, CURDATE(), CURDATE(), 2) ,
  ('vamsi', 'krishna', 'mon','vamsi@gmail.com', 'vamsi@123', 'M','1998-07-17' ,9018046384, CURDATE(), CURDATE(), 2) ,
  ('chandu', 'phani', 'shekar','chandu@gmail.com', 'chandu@123', 'M','1997-08-28' ,9018863846, CURDATE(), CURDATE(), 2) ,
  ('edukondalu', 'vara', 'dev','edukondalu@gmail.com', 'edukondalu@123', 'M','1999-01-07' ,9015489357, CURDATE(), CURDATE(), 2) ,
  ('lakshmi', 'kumari', 'vana','lakshmi@gmail.com', 'lakshmi@123', 'F','1996-09-01' ,9017566437, CURDATE(), CURDATE(), 2) ,
  ('mohini', 'lavanya', 'bhumi','mohini@gmail.com', 'mohini@123', 'M','2000-09-19' ,9018935757, CURDATE(), CURDATE(),  2) ,
  ('anantha', 'inu', 'hal','anantha@gmail.com','anantha@123', 'F','1999-09-09' ,9018643746, CURDATE(), CURDATE(), 2) ,
  ('anasuya', 'ron', 'li','anasuya@gmail.com','anasuya@123', 'F','1998-03-02' ,9018693746, CURDATE(), CURDATE(), 2) ,
  ('sarwadharam', 'he', 'ro','sarwadharam@gmail.com','sarwadharam@123', 'M','1997-05-10' ,9019884849, CURDATE(), CURDATE(), 2) ,
  ('raju', 'ho', 'patel','raju@gmail.com','raju@123', 'M','1999-06-11' ,9018539657, CURDATE(), CURDATE(), 2) ,
  ('sushma', 'k', 'patel','sushma@gmail.com','sushma@123', 'M','1998-08-17', 9016437676, CURDATE(), CURDATE(), 2) ,
  ('sravanthi', 'h', 'singh','sravanthi@gmail.com','sravanthi@123', 'M','1994-10-01', 9019776654, CURDATE(), CURDATE(), 2) ,
  ('maneesha', 'ragha', 'chowdary', 'maneesha@gmail.com','maneesha@123','M','1996-01-01', 9019983447, CURDATE(), CURDATE(), 2) ,
  ('shainika', 'neel', 'reddy','shainika@gmail.com','shainika@123', 'F','1996-01-01', 9016567787, CURDATE(), CURDATE(), 2) ,
  ('ramesh', 'yin', 'varma','ramesh@gmail.com','ramesh@123', 'M','1996-01-01', 9018934565, CURDATE(), CURDATE(), 2) ,
  ('ananya', 'hee', 'chang','ananya@gmail.com','ananya@123', 'F','1996-01-01', 9018988835, CURDATE(), CURDATE(), 2) ,
  ('ravi', 'vir', 'chang','ravi@gmail.com','ravi@123', 'M','1996-01-01', 9017788654, CURDATE(), CURDATE(), 2) ,
  ('akhilesh', 'ral', 'varma','akhilesh@gmail.com','akhilesh@123', 'M','1996-01-01', 9017689645, CURDATE(), CURDATE(), 2) ,
  ('bhanu', 'hon', 'yang','bhanu@gmail.com','bhanu@123', 'M','2000-01-01', 9019765635, CURDATE(), CURDATE(), 2) ,
  ('ayana', 'gan', 'jhar','ayana@gmail.com','ayana@123', 'M','1996-04-01', 9017646746, CURDATE(), CURDATE(), 2) ,
  ('umesh', 'kag', 'hil','umesh@gmail.com','umesh@123', 'M','1996-03-01', 9018635546, CURDATE(), CURDATE(), 2) ,
  ('dileep', 'kumar', 'gir','dileep@gmail.com','dileep@123', 'M','1996-02-01', 9016787876, CURDATE(), CURDATE(), 2) ,
  ('pavandeep', 'sa', 'mil','pavandeep@gmail.com','pavandeep@123', 'M','2000-01-01', 9017668774, CURDATE(), CURDATE(), 2) ,
  ('vimal', 'sahith', 'mehar','vimal@gmail.com','vimal@123', 'M','1999-01-01', 9014543587, CURDATE(), CURDATE(), 2) ,
  ('sudheer', 'ganga', 'mon', 'sudheer@gmail.com','sudheer@123', 'M','1998-01-01', 9016656764, CURDATE(), CURDATE(), 2) ,
  ('kiran', 'sahil', 'jeevan','kiran@gmail.com','kiran@123', 'M','1997-01-01', 9016689464, CURDATE(), CURDATE(), 2) ,
  ('suhas', 'ji', 'patel','suhas@gmail.com','suhas@123', 'M','1996-01-01', 9014465676, CURDATE(), CURDATE(), 2) ,
  ('likhil', 'dil', 'tribiani','likhil@gmail.com','likhil@123', 'M','2001-01-01', 9019787576, CURDATE(), CURDATE(), 2) ,
  ('samyuktha', 'chan', 'bing','samyuktha@gmail.com','samyuktha@123', 'F','1998-09-01', 9016745667, CURDATE(), CURDATE(), 2) ,
  ('sasi', 'hun', 'joe','sasi@gmail.com','sasi@123', 'M','1998-10-10' ,9019984578, CURDATE(), CURDATE(), 2) ,
  ('sahithi', 'sai', 'kamil', 'sahithi@gmail.com','sahithi@123', 'M','1996-01-20' ,9013376789, CURDATE(), CURDATE(), 2) ,
  ('mounica', 'kul', 'vel', 'mounica@gmail.com','mounica@123', 'F','1995-06-22' ,9017767577, CURDATE(), CURDATE(), 2) ,
  ('sridevi', 'rai', 'singh', 'sridevi@gmail.com','sridevi@123', 'F','1996-11-01' ,9015576565, CURDATE(), CURDATE(), 2) ,
  ('rama', 'tha', 'mehal', 'rama@gmail.com','rama@123', 'M','1998-05-15' ,9017756367, CURDATE(), CURDATE(), 2) ,
  ('zareena', 'kar', 'on', 'zareena@gmail.com','zareena@123', 'F','1996-02-21' ,9018775755, CURDATE(), CURDATE(), 2) ,
  ('sravani', 'phal', 'singh', 'sravani@gmail.com', 'sravani@123', 'F','1998-08-24' ,9016776874, CURDATE(), CURDATE(), 2) ;
  
  select * from Twitter_P.user_profiles;
  
  CREATE TABLE Twitter_P.user_tweets (
  user_tweet_id int not null AUTO_INCREMENT, 
  tweet LongText,
  Tweeted_on DateTime,
  is_liked ENUM('Y','N')  default 'N',
  is_commented ENUM('Y','N')  default 'N',
  is_retweeted ENUM('Y','N')  default 'N',
  retweet_count Int default 0,
  likes_count Int default 0,
  user_profile_id int,
  primary key (user_tweet_id),
  foreign key (user_profile_id) references user_profiles(user_profile_id)
);

INSERT INTO Twitter_P.user_tweets (tweet, Tweeted_on,  user_profile_id  )
VALUES("Don't loose your Hope.", CURDATE(), 9),
('Summer is hot', CURDATE(), 4),
('Nothing is Something', CURDATE(), 1),
('Achieve it', CURDATE(), 1),
('Ohh MYYY GODDD',CURDATE(), 9),
('Awesome Speech',CURDATE(), 3),
('Time to nap', CURDATE(), 7),
('No Worries', CURDATE(), 9),
('Lightening Bolt', CURDATE(), 16),
('Thank You',CURDATE(), 31),
('Happy Days', CURDATE(), 41),
('SMILE SMILE SMILE',CURDATE(), 55),
('Countdown starts!!', CURDATE(), 60),
('Terrific Movie', CURDATE(), 42),
('Acknowledge', CURDATE(), 56),
('Good GarnedeningExperience', CURDATE(), 33),
('Precious Family Time', CURDATE(), 51),
('Just Chilling', CURDATE(), 42),
('Work work work', CURDATE(), 61),
('Be Hydrated', CURDATE(), 17),
('Foodie Things are crazy', CURDATE(), 57),
('Waiting is the Hardest Job to do.', CURDATE(), 33),
('Just Breathe', CURDATE(), 44),
('Fighting!!!', CURDATE(), 47),
('Go Tigers', CURDATE(), 32),
('Good Evening all!!', CURDATE(), 42),
("Maybe if you knew Garfield's parents were murdered on a monday by anti lasagna activists you wouldn't be so judgmental.", CURDATE(), 62),
('Too Possessive',CURDATE(), 52),
('Trip is ON', CURDATE(), 44),
('Unbelievable Moments', CURDATE(), 54),
('Loyality is a Gift', CURDATE(), 46),
('No Wonder to see the world this way', CURDATE(), 8),
('Past is Past.. .But the past is the Fact', CURDATE(), 35),
('TIK TOK TIK TOK ', CURDATE(), 57),
('Swagging Around', CURDATE(), 6),
('THOR', CURDATE(), 9),
('The Invitation', CURDATE(), 63),
('Lost & Found', CURDATE(), 35),
('Memphis', CURDATE(),31),
('Blooming Days', CURDATE(), 55),
('Fall is Coming', CURDATE(), 60)
;
select*from Twitter_P.user_tweets ;
update Twitter_P.user_profiles up set up.tweets_count = (select count(ut.tweet) from Twitter_P.user_tweets ut where ut.user_profile_id=up.user_profile_id group by ut.user_profile_id);
SET SQL_SAFE_UPDATES = 0;
CREATE TABLE Twitter_P.likes (
  like_id int not null AUTO_INCREMENT, 
  user_tweet_id int,
  liked_on DateTime,
  liked_by_user_id int,
  user_profile_id int,
  primary key (like_id),
  UNIQUE INDEX (user_tweet_id, liked_by_user_id),
  foreign key (user_tweet_id) references user_tweets(user_tweet_id),
  foreign key (user_profile_id) references user_profiles(user_profile_id),
  foreign key (liked_by_user_id) references user_profiles(user_profile_id)
);

INSERT INTO Twitter_P.likes(user_tweet_id, liked_on, liked_by_user_id) VALUES(116, CURDATE(), 1),
(85, CURDATE(), 2),
(96, CURDATE(), 3),
(107, CURDATE(), 1),
(118, CURDATE(), 5),
(123, CURDATE(), 6),
(85, CURDATE(), 7),
(96, CURDATE(), 8),
(107, CURDATE(), 8),
(118, CURDATE(), 9),
(123, CURDATE(), 10),
(85, CURDATE(), 11),
(96, CURDATE(), 12),
(107, CURDATE(), 13),
(118, CURDATE(), 14),
(123, CURDATE(), 15),
(85, CURDATE(), 16),
(96, CURDATE(), 17),
(90, CURDATE(), 18),
(105, CURDATE(), 19),
(115, CURDATE(), 20),
(90, CURDATE(), 21),
(105, CURDATE(), 22),
(115, CURDATE(), 23),
(115, CURDATE(), 24),
(87, CURDATE(), 25),
(97, CURDATE(), 26),
(105, CURDATE(), 27),
(90, CURDATE(), 28),
(100, CURDATE(), 29),
(111, CURDATE(), 30),
(112, CURDATE(), 31),
(111, CURDATE(), 32),
(95, CURDATE(), 33),
(116, CURDATE(), 34),
(92, CURDATE(), 35),
(116, CURDATE(), 36),
(116, CURDATE(), 37),
(90, CURDATE(), 38),
(100, CURDATE(), 39),
(85, CURDATE(), 60);

select * from twitter_p.likes;
update twitter_p.likes l set l.user_profile_id=(select ut.user_profile_id from twitter_p.user_tweets ut  where l.user_tweet_id=ut.user_tweet_id);

update twitter_p.user_tweets ut set ut.likes_count= (select count(l.like_id) c from twitter_p.likes l where l.user_tweet_id=ut.user_tweet_id group by l.user_tweet_id);
update twitter_p.user_tweets set is_liked='Y' where likes_count>0;
select * from twitter_p.user_tweets;

CREATE TABLE twitter_p.comments (
  comment_id int not null AUTO_INCREMENT, 
  content LONGTEXT,
  user_tweet_id int,
  commented_by_uid int,
  commented_on DateTime,
  is_liked BOOL,
  commented_for_uid int,
  primary key (comment_id),
  foreign key (user_tweet_id) references twitter_p.user_tweets(user_tweet_id),
  foreign key (commented_by_uid) references twitter_p.user_profiles(user_profile_id),
  foreign key (commented_for_uid) references twitter_p.user_profiles(user_profile_id)
);

INSERT INTO twitter_p.comments(content, user_tweet_id, commented_by_uid, commented_on, is_liked) VALUES ('comment text',85, 42, CURDATE(), 1),
('comment text',85, 42, CURDATE(), 1),
('comment text',85, 1, CURDATE(),  1),
('comment text',85, 42, CURDATE(), 1),
('comment text',85, 1, CURDATE(), 1),
('comment text',85, 32, CURDATE(), 1),
('comment text',96, 32, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',96, 32, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',107, 1, CURDATE(), 1),
('comment text',85, 1, CURDATE(), 1),
('comment text',85, 42, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1),
('comment text',107, 1, CURDATE(), 1),
('comment text',96, 32, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1),
('comment text',107, 42, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1), 
('comment text',107, 42, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1),
('comment text',107, 42, CURDATE(), 1),
('comment text',96, 1, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',96, 32, CURDATE(), 1),
('comment text',96, 42, CURDATE(), 1),
('comment text',107, 42, CURDATE(), 1),
('comment text',107, 32, CURDATE(), 1)
;
update twitter_p.comments c set c.commented_for_uid=(select ut.user_profile_id from twitter_p.user_tweets ut  where c.user_tweet_id=ut.user_tweet_id);
select* from twitter_p.comments;

CREATE TABLE twitter_p.retweets (
  retweets_id int not null AUTO_INCREMENT, 
  retweeted_uid int,
  tweet_id int,
  created_date DateTime,
  retweet_content LONGTEXT,
  retweeted_for_uid int,
  primary key (retweets_id),
  foreign key (tweet_id) references user_tweets(user_tweet_id),
  foreign key (retweeted_uid) references user_profiles(user_profile_id),
  foreign key (retweeted_for_uid) references user_profiles(user_profile_id)
);

INSERT INTO twitter_p.retweets(retweeted_uid, tweet_id, retweet_content, created_date) VALUES(1,85,'Retweeted Content',CURDATE()),
(42,85,'Retweeted Content',CURDATE()),
(32,96,'Retweeted Content',CURDATE()),
(1,107,'Retweeted Content',CURDATE()),
(32,85,'Retweeted Content',CURDATE()),
(1,107,'Retweeted Content',CURDATE()),
(1,96,'Retweeted Content',CURDATE()),
(42,107,'Retweeted Content',CURDATE()),
(32,85,'Retweeted Content',CURDATE()),
(1,96,'Retweeted Content',CURDATE()),
(1,107,'Retweeted Content',CURDATE()),
(42,85,'Retweeted Content',CURDATE()),
(32,96,'Retweeted Content',CURDATE()),
(42,85,'Retweeted Content',CURDATE()),
(1,96,'Retweeted Content',CURDATE()),
(42,107,'Retweeted Content',CURDATE()),
(32,96,'Retweeted Content',CURDATE()),
(42,85,'Retweeted Content',CURDATE()),
(1,96,'Retweeted Content',CURDATE()),
(1,107,'Retweeted Content',CURDATE());

update twitter_p.retweets r set r.retweeted_for_uid=(select ut.user_profile_id from twitter_p.user_tweets ut  where r.tweet_id=ut.user_tweet_id);
select * from twitter_p.retweets;

CREATE TABLE twitter_p.block_list(
list_id int not null AUTO_INCREMENT,
blocked_user_id int not null,
blocked_by_uid INT not null,
created_date DATETIME,
primary key (list_id),
foreign key (blocked_by_uid) references user_profiles(user_profile_id),
foreign key (blocked_user_id) references user_profiles(user_profile_id)
);

INSERT INTO twitter_p.block_list( blocked_user_id, blocked_by_uid, created_date) VALUES(4,1,CURDATE()),
(61,2,CURDATE()),
(59,3,CURDATE()),
(14,4,CURDATE()),
(38,5,CURDATE()),
(11,55,CURDATE());
UPDATE user_profiles set is_blocked=1 where 1=(select 1 from block_list where blocked_user_id = user_profile_id group by blocked_user_id );
select * from user_profiles;
CREATE TABLE twitter_p.messages (
message_id int not null AUTO_INCREMENT,
message_text text,
received_uid int,
sent_by_uid int,
sent_on datetime,
primary key (message_id),
foreign key (received_uid) references user_profiles(user_profile_id),
foreign key (sent_by_uid) references user_profiles(user_profile_id)
);

INSERT INTO messages(message_text, received_uid, sent_by_uid, sent_on) values ('How you Doing',1,2,CURDATE()),
('Hello',1,4,CURDATE()),
('Hello',4,1,CURDATE()),
('Hello',1,4,CURDATE()),
('what?',4,1,CURDATE()),
('Hello',1,4,CURDATE()),
('please follow this link for money https:money./chill',5,1,CURDATE()),
('Good Evening',1,2,CURDATE()),
('How are doing today?',1,2,CURDATE()),
("Good Evening. i'm Doing fine.",2,1,CURDATE()),
('what about you?',2,1,CURDATE()),
('litte tired. just got from work.',1,2,CURDATE()),
('take care. need to attend meeting. will catch you later',2,1,CURDATE()),
('Hello',44,4,CURDATE()),
('Hi',4,44,CURDATE()),
('Hello',44,4,CURDATE()),
('who are you?',4,44,CURDATE()),
('Hello',44,4,CURDATE()),
('?',4,44,CURDATE()),
('Hello',44,4,CURDATE()),
("moive at 6pm today. see you there",5,10,CURDATE()),
('cool. see you',10,5,CURDATE()),
('Hi',33,11,CURDATE()),
('Hello',33,11,CURDATE()),
('Hi',33,11,CURDATE()),
('How you Doing',33,11,CURDATE()),
('Hi',55,11,CURDATE()),
('Hello',5,11,CURDATE()),
('Hi',5,11,CURDATE()),
('How you Doing',5,11,CURDATE()),
('You account is hacked',26,14,CURDATE()),
('send me 1k dollars for me to leave you',26,14,CURDATE());


CREATE TABLE report_list(
report_id int not null AUTO_INCREMENT,
reported_user_id int not null,
reported_by_uid INT,
notes TEXT not null,
created_date DATETIME,
primary key (report_id),
foreign key (reported_user_id) references user_profiles(user_profile_id),
foreign key (reported_by_uid) references user_profiles(user_profile_id)
);

INSERT INTO report_list( reported_user_id, reported_by_uid, notes, created_date) VALUES(1,3,'Fake Account',CURDATE()),
(1,5,'spam messages',CURDATE()),
(1,6,'getting lot of Forward messages',CURDATE()),
(11,33,'Getting messages even after blocking this person',CURDATE()),
(4,44,'strange texts',CURDATE()),
(11,55,'automatic messages',CURDATE()),
(4,1,'robotic responses',CURDATE()),
(14,26,'mugging',CURDATE()),
(22,27,'advertisor',CURDATE()),
(27,45,'Fake Celebrate Profile',CURDATE());
UPDATE user_profiles set is_reported=1 where 1=(select 1 from report_list where reported_user_id = user_profile_id group by reported_user_id );

select * from likes;
select * from block_list;
CREATE TABLE following(
follow_id int not null AUTO_INCREMENT,
user_profile_id INT,
following_uid int,
following_from datetime,
UNIQUE INDEX(user_profile_id, following_uid),
PRIMARY key (follow_id),
FOREIGN key (following_uid) REFERENCES user_profiles(user_profile_id),
FOREIGN key (user_profile_id) REFERENCES user_profiles(user_profile_id)
);
INSERT INTO following(user_profile_id, following_uid, following_from) values (1,2,CURDATE()),
(1,32,CURDATE()),
(1,42,CURDATE()),
(1,7,CURDATE()),
(1,57,CURDATE()),
(1,19,CURDATE()),
(1,10,CURDATE()),
(2,1,CURDATE()),
(2,3,CURDATE()),
(2,4,CURDATE()),
(2,5,CURDATE()),
(2,6,CURDATE()),
(2,7,CURDATE()),
(2,32,CURDATE()),
(32,42,CURDATE()),
(32,1,CURDATE()),
(32,44,CURDATE()),
(32,19,CURDATE()),
(32,7,CURDATE()),
(32,10,CURDATE()),
(10,32,CURDATE()),
(10,42,CURDATE()),
(10,1,CURDATE()),
(10,53,CURDATE()),
(10,44,CURDATE()),
(10,60,CURDATE()),
(10,19,CURDATE()),
(10,7,CURDATE()),
(10,25,CURDATE()),
(42,32,CURDATE()),
(42,1,CURDATE()),
(42,7,CURDATE()),
(42,10,CURDATE()),
(42,2,CURDATE()),
(42,60,CURDATE()),
(42,55,CURDATE()),
(42,61,CURDATE()),
(42,52,CURDATE()),
(63,50,CURDATE()),
(63,58,CURDATE()),
(63,42,CURDATE()),
(63,1,CURDATE()),
(63,6,CURDATE()),
(6,1,CURDATE()),
(6,2,CURDATE()),
(6,3,CURDATE()),
(6,23,CURDATE()),
(6,26,CURDATE()),
(6,30,CURDATE()),
(6,44,CURDATE()),
(6,56,CURDATE()),
(6,62,CURDATE()),
(6,19,CURDATE()),
(6,13,CURDATE()),
(6,49,CURDATE()),
(9,11,CURDATE()),
(9,27,CURDATE()),
(9,34,CURDATE()),
(9,58,CURDATE()),
(9,62,CURDATE()),
(9,57,CURDATE()),
(9,41,CURDATE()),
(9,3,CURDATE()),
(9,2,CURDATE()),
(9,1,CURDATE()),
(9,42,CURDATE()),
(9,51,CURDATE()),
(9,45,CURDATE()),
(5,33,CURDATE()),
(5,44,CURDATE()),
(5,55,CURDATE()),
(5,60,CURDATE()),
(5,11,CURDATE()),
(12,1,CURDATE()),
(12,2,CURDATE()),
(12,52,CURDATE()),
(12,62,CURDATE()),
(16,17,CURDATE()),
(16,18,CURDATE()),
(16,19,CURDATE()),
(16,20,CURDATE()),
(16,21,CURDATE()),
(16,22,CURDATE()),
(24,10,CURDATE()),
(24,12,CURDATE()),
(24,22,CURDATE()),
(24,34,CURDATE()),
(24,41,CURDATE()),
(24,59,CURDATE()),
(32,2,CURDATE()),
(32,20,CURDATE()),
(45,20,CURDATE()),
(45,19,CURDATE()),
(45,18,CURDATE()),
(45,17,CURDATE()),
(45,16,CURDATE()),
(45,15,CURDATE()),
(45,14,CURDATE()),
(45,13,CURDATE()),
(52,2,CURDATE()),
(52,1,CURDATE()),
(52,22,CURDATE()),
(52,33,CURDATE()),
(52,44,CURDATE()),
(52,55,CURDATE()),
(52,11,CURDATE());

select * from following ;
select * from user_profiles;
update user_profiles up set following_count= (select count(f.following_uid) from following f where up.user_profile_id=f.user_profile_id  group by f.user_profile_id);
update user_profiles up set followers_count= (select count(f.user_profile_id) from following f where up.user_profile_id=f.following_uid  group by f.following_uid);
select * from block_list;
select * from comments;
select * from likes;
select * from messages;
select * from report_list;
select * from user_roles;
select * from user_tweets;
select * from retweets;
update user_tweets set retweet_count= ( select count(retweeted_uid) from retweets where tweet_id=user_tweet_id group by tweet_id);
update user_tweets set is_retweeted = 'Y' where retweet_count>0;
update user_tweets ut set is_commented='Y' where ut.user_tweet_id in (select c.user_tweet_id  from comments c);
 ( select count(retweeted_uid) from retweets where tweet_id=user_tweet_id group by tweet_id);
